<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Invoice Trisna Kencana</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="invoice-container" id="invoice">
    <div class="header">TRISKA KENCANA</div>
    <p><strong>Tanggal:</strong> <span id="tanggal"></span></p>

    <table class="form-identitas">
      <tr>
        <td><strong>Nama:</strong></td>
        <td>
          <input type="text" id="inputNama" oninput="updatePreview()">
          <div class="print-text" id="previewNama"></div>
        </td>
      </tr>
      <tr>
        <td><strong>Alamat:</strong></td>
        <td>
          <input type="text" id="inputAlamat" oninput="updatePreview()">
          <div class="print-text" id="previewAlamat"></div>
        </td>
      </tr>
      <tr>
        <td><strong>No. Telp:</strong></td>
        <td>
          <input type="text" id="inputTelp" oninput="updatePreview()">
          <div class="print-text" id="previewTelp"></div>
        </td>
      </tr>
    </table>

    <div class="form-barang">
      <select id="barang">
        <option value="">-- Pilih Barang --</option>
        <option value="TENDA POLOS 4X6">TENDA POLOS 4X6</option>
        <option value="TENDA SEMI 4X6">TENDA SEMI 4X6</option>
        <option value="TENDA BALON 4X6">TENDA BALON 4X6</option>
        <option value="TENDA SKAK 4X6">TENDA SKAK 4X6</option>
        <option value="TENDA LAMPION 4X6">TENDA LAMPION 4X6</option>
        <option value="TENDA LAPIS 4X6">TENDA LAPIS 4X6</option>
        <option value="TENDA POLOS 6X6">TENDA POLOS 6X6</option>
        <option value="TENDA SEMI 6X6">TENDA SEMI 6X6</option>
        <option value="TENDA LAMPION 6X6">TENDA LAMPION 6X6</option>
        <option value="TENDA BALON 6X6">TENDA BALON 6X6</option>
        <option value="TENDA SKAK 6X6">TENDA SKAK 6X6</option>
        <option value="TENDA LAPIS 6X6">TENDA LAPIS 6X6</option>
        <option value="KURSI BIASA">KURSI BIASA</option>
        <option value="KURSI COVER">KURSI COVER</option>
        <option value="MEJA BIASA">MEJA BIASA</option>
        <option value="MEJA BULAT">MEJA BULAT</option>
        <option value="MEJA + GUBUKAN">MEJA + GUBUKAN</option>
        <option value="PIRING">PIRING</option>
        <option value="MANGKOK BAKSO">MANGKOK BAKSO</option>
        <option value="MANGKOK SOTO">MANGKOK SOTO</option>
        <option value="PANGGUNG 4 X 4">PANGGUNG 4 X 4</option>
        <option value="PANGGUNG 4 X 6">PANGGUNG 4 X 6</option>
        <option value="PANGGUNG 6 X 6">PANGGUNG 6 X 6</option>
        <option value="PANGGUNG 6 X 8">PANGGUNG 6 X 8</option>
        <option value="BLOWER BIASA">BLOWER BIASA</option>
        <option value="BLOWER AIR">BLOWER AIR</option>
        <option value="TIRAI 6 METER">TIRAI 6 METER</option>
        <option value="KARPET 1 METER">KARPET 1 METER</option>
      </select>
      <input type="number" id="jumlah" placeholder="Jumlah">
      <input type="number" id="harga" placeholder="Harga (Rp)">
      <button onclick="tambahBarang()">Tambah</button>
    </div>

    <table class="invoice-table">
      <thead>
        <tr>
          <th>No</th>
          <th>Nama Barang</th>
          <th>Jumlah</th>
          <th>Harga</th>
          <th>Total</th>
          <th>Aksi</th>
        </tr>
      </thead>
      <tbody id="tabel-barang"></tbody>
    </table>

    <div class="total" id="total-akhir">TOTAL: Rp -</div>

    <div class="actions">
      <button class="btn" onclick="cetakInvoice()">Cetak</button>
    </div>
  </div>

  <script>
    const hargaDefault = {
       "TENDA POLOS 4X6": 300000,
      "TENDA SEMI 4X6": 400000,
      "TENDA BALON 4X6": 600000,
      "TENDA SKAK 4X6": 750000,
      "TENDA LAMPION 4X6": 800000,
      "TENDA LAPIS 4X6": 850000,
      "TENDA POLOS 6X6": 400000,
      "TENDA SEMI 6X6": 900000,
      "TENDA LAMPION 6X6": 1200000,
      "TENDA BALON 6X6": 1200000,
      "TENDA SKAK 6X6": 1000000,
      "TENDA LAPIS 6X6": 950000,
      "KURSI BIASA": 3500,
      "KURSI COVER": 6000,
      "MEJA BIASA": 50000,
      "MEJA BULAT": 55000,
      "MEJA + GUBUKAN": 100000,
      "PIRING": 75000,
      "MANGKOK BAKSO": 75000,
      "MANGKOK SOTO": 75000,
      "PANGGUNG 4 X 4": 700000,
      "PANGGUNG 4 X 6": 1000000,
      "PANGGUNG 6 X 6": 1100000,
      "PANGGUNG 6 X 8": 1600000,
      "BLOWER BIASA": 300000,
      "BLOWER AIR": 350000,
      "TIRAI 6 METER": 150000,
      "KARPET 1 METER": 10000
    };

    const today = new Date();
    document.getElementById("tanggal").textContent = today.toLocaleDateString("id-ID");

    let dataBarang = [];

    document.getElementById("barang").addEventListener("change", function () {
      const barang = this.value;
      document.getElementById("harga").value = hargaDefault[barang] || "";
    });

    function tambahBarang() {
      const barang = document.getElementById("barang").value;
      const jumlah = parseInt(document.getElementById("jumlah").value);
      const harga = parseInt(document.getElementById("harga").value);

      if (!barang || isNaN(jumlah) || isNaN(harga)) {
        alert("Mohon isi semua kolom!");
        return;
      }

      const total = jumlah * harga;
      dataBarang.push({ barang, jumlah, harga, total });
      renderTabel();
      resetForm();
    }

    function hapusBarang(index) {
      dataBarang.splice(index, 1);
      renderTabel();
    }

    function renderTabel() {
      const tbody = document.getElementById("tabel-barang");
      tbody.innerHTML = "";
      let totalAkhir = 0;

      dataBarang.forEach((item, index) => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${index + 1}</td>
          <td>${item.barang}</td>
          <td>${item.jumlah}</td>
          <td>
            <input type="number" value="${item.harga}" onchange="updateHarga(${index}, this.value)" style="width: 100px;">
            <div class="print-text">Rp ${item.harga.toLocaleString('id-ID')}</div>
          </td>
          <td id="total-${index}">Rp ${item.total.toLocaleString('id-ID')}</td>
          <td><button class="hapus-btn" onclick="hapusBarang(${index})">Hapus</button></td>
        `;
        tbody.appendChild(tr);
        totalAkhir += item.total;
      });

      document.getElementById("total-akhir").textContent = "TOTAL: Rp " + totalAkhir.toLocaleString('id-ID');
    }

    function updateHarga(index, newHarga) {
      newHarga = parseInt(newHarga) || 0;
      dataBarang[index].harga = newHarga;
      dataBarang[index].total = newHarga * dataBarang[index].jumlah;

      document.getElementById(`total-${index}`).textContent = "Rp " + dataBarang[index].total.toLocaleString('id-ID');

      const baris = document.querySelectorAll("#tabel-barang tr")[index];
      const printText = baris.querySelector(".print-text");
      if (printText) {
        printText.textContent = "Rp " + newHarga.toLocaleString('id-ID');
      }

      let totalAkhir = dataBarang.reduce((sum, item) => sum + item.total, 0);
      document.getElementById("total-akhir").textContent = "TOTAL: Rp " + totalAkhir.toLocaleString('id-ID');
    }

    function resetForm() {
      document.getElementById("barang").value = "";
      document.getElementById("jumlah").value = "";
      document.getElementById("harga").value = "";
    }

    function cetakInvoice() {
      updatePreview();
      setTimeout(() => window.print(), 100);
    }

    function updatePreview() {
      document.getElementById("previewNama").textContent = document.getElementById("inputNama").value || "-";
      document.getElementById("previewAlamat").textContent = document.getElementById("inputAlamat").value || "-";
      document.getElementById("previewTelp").textContent = document.getElementById("inputTelp").value || "-";
    }
  </script>
</body>
</html>
